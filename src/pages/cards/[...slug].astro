---
import { getCollection } from 'astro:content';
import Base from '../../layouts/Base.astro';

export async function getStaticPaths() {
  const cards = await getCollection('cards');
  return cards.map((entry) => ({
    params: { slug: entry.slug },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await entry.render();
---

<Base title={entry.data.name}>
  <article>
    <div class="card-header">
      <span class="card-number">{entry.data.number}</span>
      <h1>{entry.data.name}</h1>
      <p class="keywords">{entry.data.keywords.join(' · ')}</p>
    </div>
    
    <div class="card-content">
      <Content />
    </div>
    
    <div class="meta">
      <a href="./index">← All Cards</a> · 
      <a href={`./${entry.slug}.md`}>Raw Markdown</a>
    </div>
  </article>
</Base>

<style>
  .card-number {
    display: inline-block;
    font-size: 0.875rem;
    color: var(--text-muted);
    margin-bottom: 0.5rem;
  }
</style>
